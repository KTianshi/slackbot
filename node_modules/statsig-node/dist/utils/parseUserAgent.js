"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
exports.__esModule = true;
var ua_parser_js_1 = __importDefault(require("ua-parser-js"));
// Memoize the most recent call
var parseUserAgentMemo = {
    uaString: undefined,
    res: undefined
};
// This exists only to provide compatibility for useragent library that's used
// everywhere else.
function parseUserAgent(uaString) {
    if (parseUserAgentMemo.uaString === uaString) {
        return parseUserAgentMemo.res;
    }
    var res = (0, ua_parser_js_1["default"])(uaString);
    if (res.os.name === 'Mac OS') {
        res.os.name = 'Mac OS X';
    }
    if ((res.browser.name === 'Chrome' || res.browser.name === 'Firefox') &&
        (res.device.type === 'mobile' || res.device.type === 'tablet')) {
        res.browser.name += ' Mobile';
    }
    parseUserAgentMemo.uaString = uaString;
    parseUserAgentMemo.res = res;
    return res;
}
exports["default"] = parseUserAgent;
